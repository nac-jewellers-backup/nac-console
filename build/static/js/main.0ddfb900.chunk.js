(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{55:function(e,t,n){e.exports=n(96)},60:function(e,t,n){},62:function(e,t,n){},68:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),i=(n(60),n(61),n(62),n(21)),l=n(17),s=n(10),u=n(11),p=n(15),m=n(12),d=n(14),h=n(24),f=n.n(h),b=n(19),g=n(29),v=n(18),O=n(13);n(68);function E(e){return r.a.createElement("div",{style:{paddingBottom:"10px"}},r.a.createElement("b",null,r.a.createElement("div",{style:{paddingBottom:"7px"}},r.a.createElement("label",null,e.name))),r.a.createElement("div",null,r.a.createElement("input",Object.assign({},e,{className:"inputField "+(void 0!==e.className?e.className:"")}))))}var y=n(98),j={username:null,password:null,error:null},w=n(20),S={apiURL:"localhost:7080",loginType:"email"},R=n(23),T=n.n(R),k=function(){return T()({url:arguments.length<=0?void 0:arguments[0],method:arguments.length<=1?void 0:arguments[1],data:(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:null,headers:(arguments.length<=3?void 0:arguments[3])?arguments.length<=3?void 0:arguments[3]:null})},C=function(e){e?T.a.defaults.headers.common.Authorization=e:delete T.a.defaults.headers.common.Authorization},N=n(27),x=n.n(N),_=function(e){return{type:"SET_CURRENT_USER",payload:e}},U=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).commonStateChange=function(){var e=Object(g.a)(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.setState(Object(b.a)({},a,t.target.value));case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.loginSubmit=function(){var e=Object(g.a)(f.a.mark(function e(t){var a,r,o,c,i;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=n.state,o=r.username,c=r.password,a={type:S.loginType},Object(b.a)(a,S.loginType,o),Object(b.a)(a,"password",c),i=a,n.props.logMeIn(i);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.loginSubmit=n.loginSubmit.bind(Object(v.a)(n)),n.commonStateChange=n.commonStateChange.bind(Object(v.a)(n)),n.state=JSON.parse(JSON.stringify(j)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user;e&&e.user_id&&this.props.history.push("/listing")}},{key:"componentWillReceiveProps",value:function(e){var t=e.user;t&&t.user_id&&this.props.history.push("/listing")}},{key:"render",value:function(){var e=this,t=this.props.errors,n=this.state,a=n.username,o=n.password;return r.a.createElement("div",null,r.a.createElement("div",{className:"login"},r.a.createElement("div",null,r.a.createElement("h2",null,"NAC Admin login")),r.a.createElement("form",{onSubmit:function(t){return e.loginSubmit(t)}},r.a.createElement(E,{name:"Username:",type:"text",defaultValue:a,onChange:function(t){return e.commonStateChange(t,"username")}}),t.email,r.a.createElement(E,{name:"Password:",type:"password",defaultValue:o,onChange:function(t){return e.commonStateChange(t,"password")}}),r.a.createElement("span",{style:{color:"red"}},t.password),r.a.createElement("div",{style:{paddingTop:"32px"}},r.a.createElement(y.a,{className:"loginButton",type:"submit"},"Log in")))))}}]),t}(r.a.Component),I=Object(O.b)(function(e){return{user:e.user,errors:e.errors}},{logMeIn:function(e){return function(t){k("".concat(S.apiURL,"/api/users"),"POST",e).then(function(e){if(200===e.data.status){var n=e.data.token;localStorage.setItem("jwtToken",n),C(n);var a=x()(n);t(_(a))}}).catch(function(e){e&&e.response&&e.response.data&&e.response.data.errors?t({type:"LOGIN_ERROR",payload:e.response.data.errors}):t({type:"LOGIN_ERROR",payload:{password:"Internal Server Error"}})})}}})(Object(l.g)(Object(w.d)()(U))),L=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(I,null))}}]),t}(r.a.Component),A=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Listing page")}}]),t}(r.a.Component),B=Object(O.b)(function(e){return{user:e.user,errors:e.errors}},{})(Object(l.g)(A)),M=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){setTimeout(function(){window.location.replace("/listing")},3e3)}},{key:"render",value:function(){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h3",null,"This page is not found. You will be redirected in 3 secs."))}}]),t}(r.a.Component),D=n(51),J=n(52),G=Object(O.b)(function(e){return{user:e.user}})(function(e){var t=e.component,n=(e.pageType,e.type,e.user),a=Object(J.a)(e,["component","pageType","type","user"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return Object.keys(n)&&Object.keys(n).length>0?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/login"})}}))}),P=n(16),W=n(53),z=n(54),V={},F={},Y=Object(P.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(z.a)({},e,t.payload);default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return t.payload;default:return e}}}),$=[W.a],q=Object(P.e)(Y,{},Object(P.d)(P.a.apply(void 0,$))),H={position:w.b.BOTTOM_CENTER,timeout:1500,offset:"30px",transition:w.c.SCALE};if(localStorage.jwtToken){C(localStorage.jwtToken);var K=x()(localStorage.jwtToken);q.dispatch(_(K));var Q=Date.now()/1e3;K.exp<Q&&(q.dispatch({type:"SET_CURRENT_USER",payload:{}}),window.location.href="/login")}var X=function(){return r.a.createElement(O.a,{store:q},r.a.createElement(w.a,Object.assign({template:D.a},H),r.a.createElement(i.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/login",exact:!0,component:L}),r.a.createElement(G,{path:"/listing",exact:!0,component:B}),r.a.createElement(l.b,{path:"*",exact:!0,component:M})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[55,1,2]]]);
//# sourceMappingURL=main.0ddfb900.chunk.js.map